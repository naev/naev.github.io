<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <!--Old html 4.0.1 way <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> -->
  <!--<meta charset="UTF-8">--><!-- New HTML5 way -->
  <!-- Mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Favourite icon -->
  <link rel="apple-touch-icon" sizes="180x180" href="https://naev.org/favicon-180.png">
  <link rel="icon" type="image/png" sizes="196x196" href="https://naev.org/favicon-196.png">
  <link rel="icon" type="image/png" sizes="128x128" href="https://naev.org/favicon-128.png">
  <link rel="icon" type="image/png" sizes="64x64" href="https://naev.org/favicon-64.png">
  <link rel="icon" type="image/png" sizes="32x32" href="https://naev.org/favicon-32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://naev.org/favicon-16.png">
  <link rel="shortcut icon" type="image/x-icon" href="https://naev.org/favicon.ico">
  <link rel="stylesheet" href="../ldoc.css"><!-- CSS -->
  <link rel="stylesheet" href=https://naev.org/style.css><!-- CSS -->
  <!-- EnlighterJS Resources !-->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/enlighterjs@3.4.0/dist/enlighterjs.min.css" />
  <title>Naev Lua API</title><!-- Website information -->
</head>
<body class="bg-light">
  <div id="naev-header" class="container-fluid nebula-bg">
    <canvas id="nebula-canvas-0"></canvas>
    <div class="container" style="position: relative; z-index: 1;">
      <a href="https://naev.org/"><img src="https://naev.org/imgs/naev.png" alt="Naev"></a>
    </div>
  </div>
  <nav class="navbar navbar-expand-sm navbar-dark bg-dark">
    <div class="container">
      <a class="p-0 navbar-brand" href="#"><img id="logo" class="img-fluid" src="https://naev.org/favicon.png" alt=
      "Naev"></a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=
      "#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label=
      "Toggle navigation"><span class="navbar-toggler-icon"></span></button>
      <div class="collapse navbar-collapse justify-content-between" id="navbarNavAltMarkup">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="https://naev.org/">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://naev.org/page/1/">Blarg</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://naev.org/media/">Media</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://naev.org/downloads/">Downloads</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://naev.org/contact/">Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/naev/naev">Github</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://github.com/naev/naev/wiki">Wiki</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://naev.org/api/">Lua API</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="https://naev.org/devmanual/">Dev Manual</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

<div id="lDoc_container">

<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Naev Lua API</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>


<h2>Modules</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../modules/ai.html">ai</a></li>
  <li><a href="../modules/cinema.html">cinema</a></li>
  <li><strong>escort</strong></li>
  <li><a href="../modules/fleet.html">fleet</a></li>
  <li><a href="../modules/format.html">format</a></li>
  <li><a href="../modules/lazyload.html">lazyload</a></li>
  <li><a href="../modules/linenoise.html">linenoise</a></li>
  <li><a href="../modules/lmisn.html">lmisn</a></li>
  <li><a href="../modules/lmusic.html">lmusic</a></li>
  <li><a href="../modules/love_shaders.html">love_shaders</a></li>
  <li><a href="../modules/luatk.html">luatk</a></li>
  <li><a href="../modules/asteroid.html">asteroid</a></li>
  <li><a href="../modules/audio.html">audio</a></li>
  <li><a href="../modules/bkg.html">bkg</a></li>
  <li><a href="../modules/camera.html">camera</a></li>
  <li><a href="../modules/canvas.html">canvas</a></li>
  <li><a href="../modules/colour.html">colour</a></li>
  <li><a href="../modules/commodity.html">commodity</a></li>
  <li><a href="../modules/data.html">data</a></li>
  <li><a href="../modules/diff.html">diff</a></li>
  <li><a href="../modules/evt.html">evt</a></li>
  <li><a href="../modules/faction.html">faction</a></li>
  <li><a href="../modules/file.html">file</a></li>
  <li><a href="../modules/font.html">font</a></li>
  <li><a href="../modules/gfx.html">gfx</a></li>
  <li><a href="../modules/gui.html">gui</a></li>
  <li><a href="../modules/hook.html">hook</a></li>
  <li><a href="../modules/jump.html">jump</a></li>
  <li><a href="../modules/linopt.html">linopt</a></li>
  <li><a href="../modules/misn.html">misn</a></li>
  <li><a href="../modules/munition.html">munition</a></li>
  <li><a href="../modules/music.html">music</a></li>
  <li><a href="../modules/naev.html">naev</a></li>
  <li><a href="../modules/news.html">news</a></li>
  <li><a href="../modules/outfit.html">outfit</a></li>
  <li><a href="../modules/pilot.html">pilot</a></li>
  <li><a href="../modules/pilotoutfit.html">pilotoutfit</a></li>
  <li><a href="../modules/player.html">player</a></li>
  <li><a href="../modules/rnd.html">rnd</a></li>
  <li><a href="../modules/safelanes.html">safelanes</a></li>
  <li><a href="../modules/shader.html">shader</a></li>
  <li><a href="../modules/ship.html">ship</a></li>
  <li><a href="../modules/shiplog.html">shiplog</a></li>
  <li><a href="../modules/spfx.html">spfx</a></li>
  <li><a href="../modules/spob.html">spob</a></li>
  <li><a href="../modules/system.html">system</a></li>
  <li><a href="../modules/tex.html">tex</a></li>
  <li><a href="../modules/time.html">time</a></li>
  <li><a href="../modules/tk.html">tk</a></li>
  <li><a href="../modules/transform.html">transform</a></li>
  <li><a href="../modules/var.html">var</a></li>
  <li><a href="../modules/vec2.html">vec2</a></li>
  <li><a href="../modules/equipopt.optimize.html">equipopt.optimize</a></li>
  <li><a href="../modules/pilotai.html">pilotai</a></li>
  <li><a href="../modules/portrait.html">portrait</a></li>
  <li><a href="../modules/pp_shaders.html">pp_shaders</a></li>
  <li><a href="../modules/prng.html">prng</a></li>
  <li><a href="../modules/prob.html">prob</a></li>
  <li><a href="../modules/proximity.html">proximity</a></li>
  <li><a href="../modules/swapship.html">swapship</a></li>
  <li><a href="../modules/vn.html">vn</a></li>
  <li><a href="../modules/vntk.html">vntk</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>escort</code></h1>
<p>Library for dealing with escorts in missions.</p>
<p>


<p>Can be used either to provide the player with a few perishable escorts, or provide a set of escorts the player has to follow and guard to the destination.</p>

<p>Below is a simple example of a convoy that the player has to protect while it goes on to some spob.</p>
<pre><code> -- This is an example of using the API to provide a fleet the player has to
 -- guard starting from the start_convoy function that sets it up
 -- The mission will automatically fail if all the escorts die
 function start_convoy ()
    -- Initialize the library with the pilots the player has to escort
    escort.init( {"Koala", "Llama"}, {faction=faction.get("Independent")} )
    -- Set the destination target, the escorts will try to go there automagically
    escort.setDest( spob.get("Darkshed"), "convoy success" )
 end
 -- This function will be run  when the player lands on the destination
 function convoy_success ()
    local alive = escort.num_alive()
    -- Do something based on the number of escorts that are alive
    do_something( alive )
    -- Cleans up the library
    escort.exit()
 end
</code></pre>


<p>Below is a more complex example where the player becomes the leader and the escorts follow and protect the player.</p>
<pre><code> -- Initialize the library and give the player two escorts that will guard them / help them out
 function start_convoy ()
    escort.init( {"Lancelot", "Lancelot"}, {faction=faction.get("Mercenary"), nofailifdead=true, func_pilot_death="escort_died"} )
 end
 -- The escort died
 function escort_died( _p )
    if escort.num_alive() &lt;= 0 then
       -- All the escorts are dead
    end
 end
</code></pre>

</p>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#init">init (ships[, params])</a></td>
	<td class="summary">Initializes the library by setting all the necessary hooks.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#exit">exit ()</a></td>
	<td class="summary">Cleans up the escort framework when done, eliminating all hooks.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#num_alive">num_alive ()</a></td>
	<td class="summary">Gets the number of escorts that are still alive.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#pilots">pilots ()</a></td>
	<td class="summary">Gets the list of pilots.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#setDest">setDest (dest, success[, failure])</a></td>
	<td class="summary">Sets the destination of the escort convoy.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#setFollow">setFollow ()</a></td>
	<td class="summary">Disables the escorts destination target and makes them follow the player.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#spawn">spawn (pos)</a></td>
	<td class="summary">Spawns the escorts at location.</td>
	</tr>
</table>

<br/>
<br/>


    <h2><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "init"></a>
    <strong>init (ships[, params])</strong>
    </dt>
    <dd>
    Initializes the library by setting all the necessary hooks.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">ships</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.6">table</a></span>
         List of ships to add.
        </li>
        <li><span class="parameter">params</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.6">table</a></span>
         List of optional parameters.
         (<em>optional</em>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "exit"></a>
    <strong>exit ()</strong>
    </dt>
    <dd>
    Cleans up the escort framework when done, eliminating all hooks.







</dd>
    <dt>
    <a name = "num_alive"></a>
    <strong>num_alive ()</strong>
    </dt>
    <dd>
    Gets the number of escorts that are still alive.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><span class="type">number</span></span>
        Number of escorts still alive.
    </ol>




</dd>
    <dt>
    <a name = "pilots"></a>
    <strong>pilots ()</strong>
    </dt>
    <dd>
    Gets the list of pilots.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.6">table</a></span>
        Table containing the existing pilots. The first will be the leader.
    </ol>




</dd>
    <dt>
    <a name = "setDest"></a>
    <strong>setDest (dest, success[, failure])</strong>
    </dt>
    <dd>
    Sets the destination of the escort convoy. </p>

<p>Disables the escorts from following the player.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">dest</span>
            <span class="types"><span class="type">system</span> or <span class="type">spob</span></span>
         Destination of the escorts.
        </li>
        <li><span class="parameter">success</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
         Name of the global function to call on success.
        </li>
        <li><span class="parameter">failure</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.4/manual.html#6.4">string</a></span>
         Name of the global function to call on failure. Default will give a vntk message and fail the mission.
         (<em>optional</em>)
        </li>
    </ul>





</dd>
    <dt>
    <a name = "setFollow"></a>
    <strong>setFollow ()</strong>
    </dt>
    <dd>
    Disables the escorts destination target and makes them follow the player.







</dd>
    <dt>
    <a name = "spawn"></a>
    <strong>spawn (pos)</strong>
    </dt>
    <dd>
    Spawns the escorts at location.  This can be useful at the beginning if you want them to jump in or take of while in space. It is handled automatically when the player takes off or jumps into a system.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">pos</span>
            <span class="types"><span class="type">Vector</span>, <span class="type">Spob</span> or <span class="type">System</span></span>
         Position to spawn the fleet at. The argument is directly passed to pilot.add.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        table Table of newly created pilots.
    </ol>




</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.5.0</a></i>
<i style="float:right;">Last updated 2025-04-14 08:00:19 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
<div id="naev-footer" class="container-fluid nebula-bg mt-5">
  <canvas id="nebula-canvas-1"></canvas>
  <div class="container" style="position: relative; z-index: 1;">
    <footer class="row text-muted">
      <p class="col-xs-12 col-sm-6 text-left">© 2025 Naev Development Blarg</p>
      <p class="col-xs-12 col-sm-6 text-right">Original content licensed under <a href=
      "https://creativecommons.org/licenses/by-sa/4.0/">CC-by-sa 4.0</a></p>
    </footer>
  </div>
</div>
  <!-- Naev.org Javascript -->
  <script type="text/javascript" src="https://naev.org/site.js"></script>

  <!-- EnlighterJS -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/enlighterjs@3.4.0/dist/enlighterjs.min.js">
          integrity="sha384-qMvs9nZ6afccojk2J2vg2CwyiHc5m/k1nb9VWa+otyt3VK4agPEc9/pfWC/iOxkG"
          crossorigin="anonymous">
  </script>

  <!-- Init Code -->
  <script type="text/javascript">
      // - highlight all pre + code tags (CSS3 selectors)
      // - use theme "enlighter"
      // - replace tabs with 2 spaces
      EnlighterJS.init('pre', 'code', {
              language : 'lua',
              theme: 'enlighter',
              indent : 2
      });
  </script>
</body>
</html>
